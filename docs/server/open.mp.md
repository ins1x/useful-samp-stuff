# open.mp (Open Multiplayer) | VK
![open.mp (Open Multiplayer), image #1](https://sun9-42.userapi.com/impg/IcspeIvZSpQAilnJEriT-i3VFWXyD7M8XyMZ1Q/TW0B8Iqz714.jpg?size=75x75&quality=95&sign=bf9f256f7e2b6d0d1ab76177a3cc10b6&type=album)

Что такое open.mp?
------------------

**open.mp** (Open Multiplayer) - мультиплеерный мод, разрабатываемый в качестве замены [San Andreas Multiplayer](https://vk.com/away.php?to=https%3A%2F%2Fwww.sa-mp.com%2F&cc_key=) (SA-MP), созданный в ответ на проблемы с обновлениями и разработкой SA-MP. Игроки с клиентом SA-MP смогут подключаться к этому серверу. В дальнейшем станет доступен новый клиент open.mp, что позволит выпускать больше интересных обновлений.

Возможности
-----------

• **Обратная совместимость** с San Andreas Multiplayer. Это значит, что существующий клиент [SA-MP](https://vk.com/away.php?to=https%3A%2F%2Fwww.sa-mp.com%2F&cc_key=) и все скрипты будут работать с [open.mp](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru&cc_key=).

• **Уникальность.** open.mp не [форк](https://vk.com/away.php?to=https%3A%2F%2Fru.wikipedia.org%2Fwiki%2F%D4%EE%F0%EA&cc_key=), а полное переписывание с нуля. При таком подходе снимаются юридические вопросы с легальностью использования, и учитываются знания и опыт накопленные за десятилетия.

• **Исправлены ошибки**. Многие [известные ошибки](https://vk.com/away.php?to=https%3A%2F%2Fteam.sa-mp.com%2Fwiki%2FBugs.html&cc_key=) SAMP были исправлены, теперь у вас есть все необходимые инструменты в ваших руках.

• **Производительность.** Значительно повышена производительность и стабильность по сравнению с сервером SA:MP. Сняты [стандартные ограничения SA-MP](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2Fdocs%2Fscripting%2Fresources%2Flimits&cc_key=).

• **Расширяемый API**. Используйте расширяемый C++ API с помощью комплекта разработки программного обеспечения open.mp. [PAWN](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2Fdocs%2Fscripting%2Flanguage%2Freference&cc_key=) по-прежнему остается основным и поддерживаемым языком сценариев.

• **Документация**. [Ресурс заменивший официальную](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2Fdocs&cc_key=) _SA-MP wiki_. Наиболее доступный источник документации SA-MP и в конечном счёте open.mp, в который сообщество с легкостью может внести свой вклад.

• **Поддержка** различных платформ. Представьте себе один сервер [open.mp](https://vk.com/away.php?to=http%3A%2F%2Fopen.mp&cc_key=), на котором игроки используют оригинальный San Andreas, Android San Andreas и San Andreas Definitive Edition, все три вместе на одном сервере, играя друг с другом.

История появления
-----------------

Несмотря на множественные попытки подтолкнуть вперёд развитие SA-MP официально (в виде советов, просьб и предложений помочь со стороны команды бета-тестеров), а также просьб сообщества сделать хоть что-то новое, не было абсолютно никакого прогресса в работе над SA-MP. Было широко распространено мнение, что причиной этому простое отсутствие интереса со стороны разработчиков мода, что само по себе не проблема, однако не было никакого продвижения.

Команда бета-тестеров, вновь и вновь пыталась заставить _Kalcor'а_ заняться обновлениями или передать дальнейшую разработку мультиплеера кому-то другому. Вместо того, чтобы передать разработку мода заинтересованным в этом людям, основатель (**_Kalcor_**) просто хотел уйти и утянуть всё за собой в пропасть, при этом затягивая процесс как можно дольше для минимизации усилий. Также некоторые утверждают что причина этому - пассивный доход, но нет никаких доказательств этой версии. Несмотря на большой интерес и крупное слаженное сообщество, он был убеждён что моду осталось всего 1-2 года, и что сообщество вложившее много стараний чтобы сделать SA-MP таким какой он есть сейчас, не заслуживает дальнейшего развития. Многие были несогласны с несколькими из его [последних решений](https://vk.com/@rostbomb-intervu-s-yless-ob-openmp), и множественные попытки сменить вектор развития мода ни к чему не привели. Поэтому к сожалению оставалось только одно решение — попытаться создать проект, который будет духовным наследником SA-MP.

Сам по себе мультиплеер великолепен, но его закрытый код означает, что вся власть находится в руках одного человека. Ввиду полного бездействия необходимо было решить главную проблему — его полный контроль над владением исходным кодом. На самом деле никто не хотел переписывать всё с нуля, но это единственный юридически легальный способ возродить всеми любимый мультиплеер. Совершенно новый аналогичный мультиплеер тоже не был бы решением — существует огромное множество серверов и игроков, которые бы не смогли использовать на нём текущие скрипты и игровые моды.

Таким образом основным планом становится создание обратно-совместимого сервера вместе с новым мультиплеером. Мультиплеер позволит игрокам SA-MP подключаться (чтобы владельцы серверов не теряли свою базу игроков), позволяя работать существующим сценариям. Команда из 22 человек во главе с **_Y\_Less_** — одним из создателей существующего SA:MP, работавшего непосредственно с **_Kalсor_** на протяжении 7-8 лет, — с обнадёживающими намерениями взялись за разработку замены существующей платформы с нуля. Разрабатываемый командой профессионалов новый мультиплеер [open.mp](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru&cc_key=) это своеобразная потенциальная революция, влекущая за собой положительные перемены.

![open.mp (Open Multiplayer), image #2](https://sun9-5.userapi.com/impg/FPRWPChfstpnxRaItyzVaxxsedeFEm-tLEJC_w/rj4i9CrnnE4.jpg?size=75x25&quality=95&sign=68b83bda87722748e9777fbad9464f07&type=album)

Установка и настройка сервера open.mp
-------------------------------------

Скачать, опробовать, а также посмотреть полный список изменений и исправлений в [open.mp](https://vk.com/away.php?to=http://open.mp&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=http://open.mp&post=-187615176_1006&cc_key=") RC1 вы можете на странице релизов в GitHub репозитории: [https://github.com/openmultiplayer/server-beta/releases](https://vk.com/away.php?to=https://github.com/openmultiplayer/server-beta/releases&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/server-beta/releases&post=-187615176_1006&cc_key=")

С релизом приходит новая версия компилятора 3.10.11 и официальные инклуды сервера на замену стандартным самповским (так что временное решение в виде [omp.inc](https://vk.com/away.php?to=http%3A%2F%2Fomp.inc&cc_key=) больше не требуется). Для ваших скриптов появился инструмент "upgrade", который поможет добавить const- и tag- корректность в соответствии со стилем кода в новых библиотеках. Помимо прочего, за это время внутри сервера была обновлена виртуальная машина Pawn, что привносит некоторые изменения и улучшения.

Вы можете легко настроить свой сервер, так как он работает почти так же как сервер SA:MP, но с некоторыми небольшими отличиями. Скачайте последнюю бета-версию сервера [https://github.com/openmultiplayer/server-beta/releases](https://vk.com/away.php?to=https%3A%2F%2Fgithub.com%2Fopenmultiplayer%2Fserver-beta%2Freleases&cc_key=). Для запуска мода все что вам нужно сделать, это поместить файловую структуру в папку сервера open.mp (или файлы open.mp в корневую папку сервера SA:MP), и все будет готово. читайте `server.cfg`и загружайте свои скрипты из папок `gamemodes`и `filterscripts`, а также загружайте устаревшие плагины из своей `plugins`папки. Новый каталог `components`содержит библиотеки и [pdb](https://vk.com/away.php?to=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fvisualstudio%2Fdebugger%2Fspecify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger%3Fview%3Dvs-2022&cc_key= "https://docs.microsoft.com/en-us/visualstudio/debugger/specify-symbol-dot-pdb-and-source-files-in-the-visual-studio-debugger?view=vs-2022") файлы с отладочной информацией.

> Обратите внимание, что плагины для взлома памяти не будут работать! Многие плагины уже работают корректно. (например: sscanf, streamer, MySQL, discord-connector, crashdetect и.т.д.) Список [конвертированных плагинов open.mp](https://vk.com/away.php?to=http%3A%2F%2Fopen.mp&cc_key=)

### Запуск omp-server

![open.mp (Open Multiplayer), image #3](https://sun9-27.userapi.com/impg/vdAvehW3MMD06U_XcSodWWhMT0rgEDhLpM2Ryg/FmINp0CIOj0.jpg?size=75x36&quality=95&sign=1bff7d4f9c37e321dd3300a18739d7b0&type=album)

Теперь есть три способа управления: классический через существующий [`server.cfg`](https://vk.com/away.php?to=http%3A%2F%2Fserver.cfg&cc_key=), новый `config.json`или из командной строки. Чтобы использовать существующий файл [`server.cfg`](https://vk.com/away.php?to=http%3A%2F%2Fserver.cfg&cc_key=), просто скопируйте его в rjhytdjq каталог c`omp-server` и запустите из командной строки:

Linux:

```
./omp-server

```


Windows:

```
omp-server.exe

```


**Чтобы запустить мод напрямую по имени:**

Linux:

```
./omp-server --script my-mode.amx

```


Windows:

```
omp-server.exe --script my-mode.amx

```


> Мод должен быть в каталоге`gamemodes/`, как и раньше.

**Чтобы сгенерировать [config.json](https://vk.com/away.php?to=http%3A%2F%2Fconfig.json&cc_key=):**

Linux:

```
./omp-server --write-config

```


Windows:

```
omp-server.exe --write-config
```


Основные положения описаны в [FAQ](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2Ffaq&cc_key=). Если у вас есть какие-либо вопросы относительно настройки вашего сервера с вашими старыми скриптами, не стесняйтесь спрашивать на [Discord сервере](https://vk.com/away.php?to=http%3A%2F%2Fdiscord.gg%2Fsamp&cc_key=) канал **_#omp-server-beta_**.

### Подробнее о совместимости и API

![https://gist.github.com/AmyrAhmady/94a33fc502c2694032523969e7d2ee02](https://sun9-79.userapi.com/impg/V0tu8hjWed0_4hR45WfVQFlwHs2Hwa21BgdK4A/ziRV_fMOha4.jpg?size=75x31&quality=95&sign=a17d4982a31c642431623979ad97d61a&type=album)

[https://gist.github.com/AmyrAhmady/94a33fc502c2694032523969e7d2ee02](https://vk.com/away.php?to=https%3A%2F%2Fgist.github.com%2FAmyrAhmady%2F94a33fc502c2694032523969e7d2ee02&cc_key= "https://gist.github.com/AmyrAhmady/94a33fc502c2694032523969e7d2ee02")

Во-первых, ОЧЕНЬ важное уточнение - существующие скрипты все равно будут работать как есть. Разработчики много работали над обратной совместимостью и учитывали это при каждом решении.

Так что, опять же, мы должны ясно дать понять, что весь существующий _«код SA:MP»_ будет работать. Что это означает? Заработает любой код, который:

*   Написан на [pawn](https://vk.com/away.php?to=https%3A%2F%2Fru.wikipedia.org%2Fwiki%2FPawn&cc_key=)
*   Использует оригинальный SA:MP API без плагинов
*   Перекомпилирован с инклудом [omp.inc](https://vk.com/away.php?to=http%3A%2F%2Fomp.inc&cc_key=)
*   Использует [компилятор сообщества](https://vk.com/away.php?to=https%3A%2F%2Fgithub.com%2Fpawn-lang%2Fcompiler%2Freleases&cc_key=)

Однако:

*   Если вы используете плагин реализованный на языке, отличном от pawn, этот плагин, вероятно, нужно будет сначала портировать. Так что ваш код не будет работать сразу.
*   Если вы используете другие плагины, такие как streamer, YSF, audio и.т. д. они могут уже работать, могут нуждаться в переносе или могут быть совершенно излишними, поскольку их функциональность интегрирована в главный сервер.
*   Если у вас есть только .AMX вашего мода, а нет исходника. В любом случае, хотя все функции SA:MP существуют, некоторые из них были переделаны или заменены макросами, и вы ДОЛЖНЫ перекомпилировать мод из исходников. Поэтому, если вы не сможете, ваш код вообще не будет работать.

> Слово «_plugin_» теперь используется для описания устаревших плагинов — тех, которые были написаны для SA-MP, и у open.mp есть API для загрузки этих существующих плагинов. Новое название для подключаемых библиотек в будущем это «_modules_» и обозначает любой подключаемый модуль который используют более новый, и гораздо более обширный API с open.mp.

Устаревшие плагины по-прежнему работают нормально и будут продолжать это делать, если только они не используют взлом памяти такой как YSF, который опирается на адреса и структуры, которые совершенно не похожи на этот сервер. Функции базы данных по умолчанию такие же, как и раньше — [SQLite](https://vk.com/away.php?to=https%3A%2F%2Fwww.sqlite.org%2Findex.html&cc_key=).

Чтобы пересобрать мод для [open.mp](https://vk.com/away.php?to=http%3A%2F%2Fopen.mp&cc_key=), нам нужно изменить только первое включение и добавить одно определение.

```
#include <a_samp>
```


заменить на:

```
#define OPENMP_COMPAT
#include <openmp\openmp>
```


[Пример простого мода](https://vk.com/away.php?to=https%3A%2F%2Fpastebin.com%2FGs2f6hSu&cc_key=) из официальной документации.

### Предупреждения

Первая ошибка при компиляции которую вы можете получить:

`open.mp scripts require the community compiler from: git.io/pawn-compiler`

> Если вы получили такую ошибку, перейдите на [https://git.io/pawn-compiler](https://vk.com/away.php?to=https%3A%2F%2Ftranslate.google.com%2Fwebsite%3Fsl%3Dauto%26tl%3Dru%26hl%3Dru%26u%3Dhttps%3A%2F%2Fgit.io%2Fpawn-compiler&cc_key= "https://translate.google.com/website?sl=auto&tl=ru&hl=ru&u=https://git.io/pawn-compiler") и загрузите версию компилятора 3.10.10 или более позднюю. Для релиза мы хотели бы иметь инструмент, эквивалентный pawno, с уже интегрированным компилятором, но пока этого не сделали.

**_Рекомендуется_** сначала попытаться скомпилировать ваш режим с помощью этого компилятора, так как он включает предупреждения о корректности константы, поэтому вы вероятно сразу же получите множество новых предупреждений (это НЕ проблема с компилятором, это проблемы в вашем коде которые существовали всегда, но ранее игнорировались). Возможно вам потребуется заменить инклуды на эти: [https://github.com/pawn-lang/pawn-stdlib](https://vk.com/away.php?to=https%3A%2F%2Ftranslate.google.com%2Fwebsite%3Fsl%3Dauto%26tl%3Dru%26hl%3Dru%26u%3Dhttps%3A%2F%2Fgithub.com%2Fpawn-lang%2Fpawn-stdlib&cc_key= "https://translate.google.com/website?sl=auto&tl=ru&hl=ru&u=https://github.com/pawn-lang/pawn-stdlib")

> Даже если вы не используете open.mp это будет полезно, так как они исправляют множество проблем с тегами и константами в исходных инклудах!

Если вы не получили никаких предупреждений при использовании нового компилятора с новой версией _a\_samp_ , теперь вы увидите множество новых предупреждений вроде:

`warning 234: function is deprecated (symbol "AddPlayerClass") Use "Class_Add" instead.`

![open.mp (Open Multiplayer), image #5](https://sun9-20.userapi.com/impg/GghAg46ZswEvypnYYhK9lS3gCBq9dizxJrhV4g/FMzpNlwRZpM.jpg?size=75x37&quality=95&sign=dc0cbac9f31d87703303e7d6e437da87&type=album)

У вас есть три варианта, и все они поддерживаются:

*   **Не обращайте внимания на предупреждения:** код все равно будет работать.
*   **Подавить предупреждения:** Измените `OPENMP_COMPAT`на `OPENMP_QUIET`:

```
#define OPENMP_QUIET
#include <openmp\openmp>

main() {}

```


*   **Исправить предупреждения:** некоторые функции изменили имена для совместимости друг с другом; некоторые функции изменили параметры, потому что старые эволюционировали и не полностью раскрывали возможности open.mp. Пока не существует простого способа преобразовать каждую функцию, но вы можете оставить предупреждения включенными при медленном преобразовании кода — старые функции будут продолжать работать отлично.

### Конверсия мода состоит из трех этапов

1.  **#define OPENMP\_QUIET.** Использование этого определения позволяет компилировать ваш режим без новых предупреждений от устаревших функций. Вы можете конвертировать код в этом режиме, и новый API будет работать, но вы не сможете использовать компилятор чтобы увидеть где остались проблемы.
2.  **#define OPENMP\_COMPAT.** Выдаст предупреждения для старых функций, но они по-прежнему будут работать, позволяя вам конвертировать части вашего режима по одной за раз. Используйте когда вы захотите начать пользоваться всеми улучшенными функциями open.mp
3.  **No define.** Как только вы думаете, что закончили преобразование своего мода, вы удаляете эти определения. Теперь вы получаете ошибки вместо предупреждений для любого старого кода, который все еще используется.

![open.mp (Open Multiplayer), image #6](https://sun9-46.userapi.com/impg/CnCur_qCLK2wUyimSuyS0FpKx5dZcNAKYv6l2w/exMcJ7Aj_EU.jpg?size=75x33&quality=95&sign=ed49285e77ac2228d103058fe062f36e&type=album)

Новый API
---------

Разработчики очень старались сделать API простым в использовании, простым в освоении, но также совместимым с предыдущими версиями. Во многом успех SA:MP обусловлен простотой использования, и необходимо сохранить ее. Но, также есть и опытные пользователи которые хотят получить гораздо больше от своего кода. Есть много улучшений которые возможно сделать, но которые не внедрить по причине сохранения совместимости. Тем не менее, есть улучшения, которые можно сделать повсюду.

> Подробно про новый API прочитайте в оригинальной статье [https://open.mp/ru/blog/scripting-api](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2Fblog%2Fscripting-api&cc_key=), все что будет ниже это краткая выжимка из данной статьи.

### Документация

Документация по новым стандартным библиотекам:  
[https://github.com/openmultiplayer/omp-stdlib  
](https://vk.com/away.php?to=https://github.com/openmultiplayer/omp-stdlib&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/omp-stdlib&post=-187615176_1006&cc_key=")Документация по новому компилятору:  
[https://github.com/openmultiplayer/compiler/  
](https://vk.com/away.php?to=https://github.com/openmultiplayer/compiler/&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/compiler/&post=-187615176_1006&cc_key=")Документация по редактору кода qawno:  
[https://github.com/openmultiplayer/qawno/  
](https://vk.com/away.php?to=https://github.com/openmultiplayer/qawno/&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/qawno/&post=-187615176_1006&cc_key=")Документация по инструменту upgrade:  
[https://github.com/openmultiplayer/upgrade](https://vk.com/away.php?to=https://github.com/openmultiplayer/upgrade&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/upgrade&post=-187615176_1006&cc_key=")

### SDK

Pawn — это давний и до сих пор официальный способ написания модов для вашего сервера. Он никуда не исчезнет, но для тех из вас, кто хочет большего контроля, мы наконец-то выпускаем полный SDK (Software Development Kit). Это интерфейс C++ для сервера, тот же самый, который используется всеми компонентами, составляющими основной код [open.mp](https://vk.com/away.php?to=http://open.mp&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=http://open.mp&post=-187615176_1006&cc_key="). Все, что они могут делать, можете сделать и вы (по сравнению с плагинами, которые были разработаны только для предоставления Pawn функций, а не написания модов). Несколько примеров компонентов для тех из вас, кто хочет сразу вникнуть. Это всё шаблоны, на которые вы можете опираться и быстро перейти к полностью работающему компоненту с наиболее распространёнными функциями:

[https://github.com/openmultiplayer/empty-template  
](https://vk.com/away.php?to=https://github.com/openmultiplayer/empty-template&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/empty-template&post=-187615176_1006&cc_key=")[https://github.com/openmultiplayer/basic-template  
](https://vk.com/away.php?to=https://github.com/openmultiplayer/basic-template&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/basic-template&post=-187615176_1006&cc_key=")[https://github.com/openmultiplayer/pawn-template  
](https://vk.com/away.php?to=https://github.com/openmultiplayer/pawn-template&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/pawn-template&post=-187615176_1006&cc_key=")[https://github.com/openmultiplayer/full-template](https://vk.com/away.php?to=https://github.com/openmultiplayer/full-template&post=-187615176_1006&cc_key= "https://vk.com/away.php?to=https://github.com/openmultiplayer/full-template&post=-187615176_1006&cc_key=")

### Теги

**_«_** _Тег — это префикс переменной, который сообщает компилятору, что при определенных обстоятельствах следует обрабатывать эту переменную особым образом. **»**_

Функции теперь используют [теги](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2Fdocs%2Fscripting%2Flanguage%2FTags&cc_key=) практически везде. Разработчики попытались найти баланс между слишком большим количеством предупреждений о тегах, и недостаточным количеством полезной информации. Предупреждения существуют не просто так, и могут помочь найти проблемы, которые вы возможно пропустили. Например, передать транспортное средство в качестве параметра объектной функции или дать кому-то несуществующее оружие:

```
// No warnings for this code, despite it being clearly wrong.
new object = CreateObject(various, parameters, here);
PutPlayerInVehicle(playerid, object);

// Same here - there's no weapon 20, despite it being amongst valid weapon IDs.
GivePlayerWeapon(playerid, 20, 200);

```


Было бы намного лучше, если бы все участки явно неправильного кода могли вызывать предупреждения. В этом сила языка с [типобезопасностью](https://vk.com/away.php?to=https%3A%2F%2Fru.wikipedia.org%2Fwiki%2F%D2%E8%EF%EE%E1%E5%E7%EE%EF%E0%F1%ED%EE%F1%F2%FC&cc_key=), и хотя pawn не является таковым, мы можем приблизиться к этому с помощью [тегов](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2Fdocs%2Fscripting%2Flanguage%2FTags&cc_key=).

```
// warning 213: tag mismatch: expected tag "Vehicle", but found "Object"
new Object:object = Object@Create(various, parameters, here);
Player_PutInVehicle(playerid, object);

// warning 213: tag mismatch: expected tag "WeaponType", but found but found none ("_")
GivePlayerWeapon(playerid, 20, 200);

// This doesn't give a warning:
GivePlayerWeapon(playerid, WEAPON_COLT45, 200);
```


### Именование функций

Большинство новых функций используют усовершенствование схемы именования, уже принятой многими библиотеками и плагинами — `Module_VerbNoun`. Больше не нужно задаваться вопросом, было ли это «Rot» или «Rotation» для этого типа элемента, нет никаких сокращений.(если только имя функции [не более 32 символов](https://vk.com/away.php?to=https%3A%2F%2Fgithub.com%2Fpawn-lang%2Fcompiler%2Fissues%2F123%23issuecomment-265628599&cc_key= "https://github.com/pawn-lang/compiler/issues/123#issuecomment-265628599"), компилятор их не примет). Например хотите изменить модель объекта? `Object_SetModel`, хотите показать текст игроку? `Text_Show`.

Есть ограниченный набор глаголов - `Get`, `Set`, `Create`, `Destroy`, `Add`, `Remove`, `Show`, `Hide`, `Run`, `Move`, `Stop`, и `Count`. Безусловно, наиболее распространенными являются `Get`и `Set`, которые в отличие от SA:MP теперь всегда идут парами. Если вы можете установить какой-либо параметр, вы также можете использовать его позже. Вам нужно указать что получить или установить `Health`, `Position`, `Model`и.т.д.

Некоторые примеры:

```
native bool:Menu_SetDisabled(Menu:menuid, bool:disabled);
native bool:Menu_GetDisabled(Menu:menuid);

native bool:Text_SetAlignment(Text:text, alignment);
native Text_GetAlignment(Text:text);

native bool:Object_Move(Object:objectid, Float:posX, Float:posY, Float:posZ, Float:speed, Float:rotX = FLOAT_NAN, Float:rotY = FLOAT_NAN, Float:rotZ = FLOAT_NAN);

native DBResult_CountRows(DBResult:dbresult);

native Player_Spawn(Player:playerid);

```


Обратите внимание, что имена модулей и тегов всегда совпадают - `Vehicle`, `DB`, `Player`и т. д. [Для этого есть причины, помимо согласованности](https://vk.com/away.php?to=https%3A%2F%2Fgithub.com%2Fpawn-lang%2Fcompiler%2Fissues%2F234&cc_key=) - это дает интерфейс, более похожий на [объектно-ориентированный](https://vk.com/away.php?to=https%3A%2F%2Fhighload.today%2Fobektno-orientirovannoe-programmirovanie%2F&cc_key= "https://highload.today/obektno-orientirovannoe-programmirovanie/"), и его легче запомнить.

### Константы

Начнем с того что вместо использования [директивы](https://vk.com/away.php?to=https%3A%2F%2Fziggi.org%2Fpawn-direktivy-preprotsessora%2F&cc_key=) `#define`для всего подряд, мы используем `const`и `enum`как можно больше, за исключением случаев когда мы ожидаем что что-то будет переопределено (`MAX_PLAYERS`):

```
// Defining this first didn't previously work, now it does.
#define MAX_PLAYERS 100
#include <openmp\openmp>

// The override method still works as well.
#undef MAX_PLAYERS
#define MAX_PLAYERS 200

```


[Использование перечислений](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fdocs%2Fscripting%2Flanguage%2FInitialisers&cc_key=) означает, что константы имеют теги для проверки во время компиляции:

```
enum ObjectMaterialTextAlignment
{
    MATERIAL_TEXT_ALIGN_LEFT,
    MATERIAL_TEXT_ALIGN_CENTRE,
    MATERIAL_TEXT_ALIGN_RIGHT,
};

```


`Object_SetMaterialText`теперь будет принимать только одно из этих трех значений и ничего больше.

### Функции для каждого игрока

Таких больше нет каждая `ForPlayer`, `ForAll`, `CreatePlayerX`и.т.д. функция заменена одной простой функцией `X_Display`(где `X`любая сущность), и `X_Has`для проверки:

```
Object_Display(objectid, playerid, true); // Show it.
Object_Display(objectid, playerid, false); // Hide it.

Text_Display(textid, true); // Show it to everyone.

if (Zone_Has(zoneid, playerid))
{
    // The player is ALLOWED to see the gang zone.
}

```


[YSI](https://vk.com/away.php?to=https%3A%2F%2Fgithub.com%2Fpawn-lang%2FYSI-Includes&cc_key=) использовал `X_SetPlayer` но показывать что-то игрокам — это самое основное что нужно делать, поэтому он заслуживает отдельного глагола. Некоторые библиотеки используют `X_Show`и `X_Hide` но это две функции, которые просто приводят к лишнему коду при проверке того что делать:

```
if (var) Checkpoint_Show(cpid, playerid);
else Checkpoint_Hide(cpid, playerid);

```


против:

```
Checkpoint_Display(cpid, playerid, var);
```


### Тестирование

Тестировать код в SA:MP было не очень просто. По большей части это просто подключение к серверу использование print() в ключевых местах. [Библиотеки](https://vk.com/away.php?to=https%3A%2F%2Fgithub.com%2Fopenmultiplayer%2Fpawn-test-scripts&cc_key=), такие как [y\_testing](https://vk.com/away.php?to=https%3A%2F%2Fgithub.com%2Fpawn-lang%2FYSI-Includes&cc_key=) значительно упрощают написание модульных тестов. Увы это работает только для достаточно «чистого» кода, кода который выполняется на сервере без особого взаимодействия с игроком. Но при тестировании такие методы по-прежнему ограничены, и не помогают сузить круг проблем когда они возникают.

Итак, как open.mp решает эту проблему? Начнем с того, что исходный код является открытым, поэтому у вас есть полный набор существующих инструментов отладки для пошагового выполнения и проверки кода. Например таких как [GDB](https://vk.com/away.php?to=https%3A%2F%2Fwww.sourceware.org%2Fgdb%2F&cc_key=) и [Visual Studio](https://vk.com/away.php?to=https%3A%2F%2Fdocs.microsoft.com%2Fen-us%2Fvisualstudio%2Fdebugger%2F%3Fview%3Dvs-2022&cc_key= "https://docs.microsoft.com/en-us/visualstudio/debugger/?view=vs-2022"), У нас также есть планы добавить аналогичные инструменты для самих pawn скриптов.

Но самым большим дополнением является «_[mock](https://vk.com/away.php?to=https%3A%2F%2Fru.wikipedia.org%2Fwiki%2FMock-%EE%E1%FA%E5%EA%F2&cc_key=)_» — фиктивная библиотека. Библиотека позволяет создавать поддельных игроков, которые действуют точно так же как настоящие игроки, но без какого-либо подключенного клиента. Таким образом любые действия выполняемые над ними сценарием, могут быть прочитаны и проанализированы другим сценарием.

Подробнее ознакомьтесь в основной статье [https://open.mp/ru/blog/debugging](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2Fblog%2Fdebugging&cc_key=)

Синхронизация и клиентская часть
--------------------------------

Недавно было представлено демо-видео клиента на ранних стадиях, как простая ранняя демонстрация. (поэтому есть некоторые глюки, авторы просто хотим показать, что это возможно и они работает над этим)

Демонстрационный ролик на YouTube: [https://youtu.be/-PWXXvHe35M](https://vk.com/away.php?to=https%3A%2F%2Fyoutu.be%2F-PWXXvHe35M&cc_key=)

Клиент Definitive Edition для open.mp будет совместим с серверами open.mp! Таким образом, вы можете разместить сервер и позволить людям решать, с какой игрой они хотят присоединиться к серверу! Представьте себе один сервер на котором игроки используют оригинальный _San Andreas, Android San Andreas_ и _San Andreas Definitive Edition_, все три вместе на одном сервере играя друг с другом. Таким образом вам как владельцу сервера, не нужно беспокоиться о новой платформе на которую можно перейти, начать заново и разделить свое сообщество.

Обратите внимание, **_клиент open.mp все еще находится в разработке,_** и в бета версии представлена только серверная часть, к которой подключение работает через [клиент SA-MP 0.3.7.](https://vk.com/away.php?to=https%3A%2F%2Fwww.sa-mp.com%2Fdownload.php&cc_key=) Разработчики не будут поддерживать версии ниже 0.3.7, но вы сможете сделать это самостоятельно (в этом вся прелесть открытого кода). Если большинство проектов [запросят](https://vk.com/away.php?to=https%3A%2F%2Fwww.burgershot.gg%2Fshowthread.php%3Ftid%3D1039&cc_key=) 0.3DL, появится поддержка со стороны команды разработчиков.

Вместо заключения
-----------------

И, конечно же, проект сервера всё ещё находится в активной разработке, поэтому пожалуйста регулярно проверяйте все ссылки, чтобы узнать о всех новшествах. Эта тема будет обновляться по мере развития проекта. Следить за проектом можно на [https://open.mp/ru/](https://vk.com/away.php?to=https%3A%2F%2Fopen.mp%2Fru%2F&cc_key=) форуме [https://forum.open.mp/](https://vk.com/away.php?to=https%3A%2F%2Fforum.open.mp%2F&cc_key=), Discord сервере [http://discord.gg/samp](https://vk.com/away.php?to=http%3A%2F%2Fdiscord.gg%2Fsamp&cc_key=), группе в _VK_ [https://vk.com/open\_mp](https://vk.com/open_mp) . Несмотря на то, что open.mp уже на пути к первому релизу [помощь приветствуется](https://vk.com/away.php?to=https%3A%2F%2Fwww.burgershot.gg%2Fshowthread.php%3Ftid%3D361&cc_key=).

![open.mp (Open Multiplayer), image #7](https://sun9-28.userapi.com/impg/d4qYNRDBAVR8s0X92qIKZEGfO05IcpzBpsn1tA/TIZmrB1u00o.jpg?size=75x25&quality=95&sign=4fffc0d609268d3872eba304116929a8&type=album)