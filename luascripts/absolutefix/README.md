<h1 align="center">AbsoluteFix</h1>
<p align="center">
    <img src="https://img.shields.io/badge/made%20for-GTA%20SA--MP-blue" >
    <img src="https://img.shields.io/badge/Server-Absolute%20Play-red">
</p>

Набор исправлений и дополнений для серверов [Absolute Play](https://sa-mp.ru/).  
Идеально подойдет игрокам которые по каким-либо причинам не могут играть с Samp Addon, но привыкли к его некоторым возможностям.  
Скрипт не содержит запрещенных на Absolute Play функций, и вы можете его использовать не опасаясь попадания в читмир.  

> По-умолчанию скрипт выгружается на других серверах. Чтобы избежать этого в конфиге установите noabsunload = false.  
Активация: Автоматическая

### Восстановленные функции аддона
* Активация дополнительных горячих клавиш на серверах Absolute Play без аддона
* Отключение паузы в Esc и при сворачивании в SA-MP (анти-афк)
* Возможность включить улучшения бег по всем поверхностям, улучшенное вождение, улучшенный джетпак, макс. высота и прочие
* Отключение загрузочных экранов
* Исправление включения чата на T
* Удаление ненужных разделов в меню в SA-MP
* Переключение текстравов на стрелки и боковые клавиши мыши
* Различные фиксы для увеличения FPS без кардинальных изменений самой игры
* Скрывает аттачи игрока при прицеливании
* Восстановлен эфект полета птиц в воздухе
* Автореконнект при потере соединения с сервером

### Исправления функций сервера
* Восстановлены звуки для сообщений в личку
* Удаление назойливых серверных текстдравов
* Фильтр подключений/отключений игроков в чате
* Исправление множества дюпнутых объектов на карте
* Исправление багов и недоработок маппинга
* Вызов меню последнего выбранного в TAB меню игрока на B
* Показать статистику игрока рядом при нажатии ALT и ПКМ
* Восстанавливает последний выбранный пункт и текст в меню
* Восстанавливает автозаполнение случайного цвета
* Пропуск диалога "у вас нет дома"
* Пропуск диалога с требованием сменить ник на RP ник
* В редакторе карт исправлен вызов "Y" меню в полете
* В редакторе карт исправлен вызов перемещения объектов на "N" в полете

### Исправления багов игры
* Исправление застревания игрока в другом игроке при спавне на DM
* Исправление шума ветра после подключения игрока
* Исправление приседание игрока с тяжелым оружием
* Исправление артефактов при сворачивании игры в интерьерах с зеркальным полом
* Исправление бага с зацикливанием звуков в меню
* Исправление создания множества взрывов при уничтожении вертолета
* Исправление спавна с бутылкой в руках на респе грув
* Исправление озвучки прохожих
* Исправление черных дорог (blackroadfix)
* Исправление мигающих тектсур (flickr)
* Исправления радара на широкоформатных экранах
* Исправление ошибки с зависанием при выходе из игры
* Исправление прыжка в фоновом режиме при уходе в афк
* Исправление выстрела при открытии TAB в меню
* Исправление координат телепорта по метке в ESC
* Исправление длинных рук на мотоцикле

### Исправления крашей игры
* Исправлен краш при выставлении некоректной модели скина сервером (Heroku)
* Исправлен краш при выставлении скина в транспорте сервером (Heroku)
* Исправлен краш при выставлении некоректного VehicleVelocity сервером
* Исправлен краш при выставлении некоректного маркера на карте
* Исправлен краш при создании некоректного объекта крана

## Дополнительные возможности
* Отключение различных эффектов дыма, пыли и теней
* Отключение возвращения в выбор класса на F4
* Возможность полностью отключить радио
* Возможность скрыть иконки пустых домов с радара
* Возможность удалить пикапы выпадающего оружия с игрока (Только для DM)
* Возможность восстановить все удаленные столбы, деревья и прочие объекты (Только для DM)
* Бессмертному игроку визуально отключается урон на его транспорте

### Горячие клавиши восстановленные скриптом и доступные без samp addon:
* J - полет в мире
* Z - починить транспорт
* U - анимации
* M - домашний транспорт
* K - заказать транспорт
* L - закрыть транспорт
* H - перевернуть транспорт

## Как использовать
- Установить [Moonloader](https://www.blast.hk/threads/13305/)  
- Установить [SAMPFUNCS](https://www.blast.hk/threads/17/)  
- Скопировать содержимое архива в папку moonloader  

## Зависимости
Используются следующие модули moonloader: *lib.samp.events, ffi, vkeys, memory, encoding*  
Найти недостающие модули можно в репозитории [sa-essentials](https://github.com/ins1x/sa-essentials)

Протестировано на *SA-MP 0.3.7-R1, Moonloader 0.26, sampfuncs 5.4.1-final*  
Основные функции будут работать и на других версиях, но некоторые мемхаки не адаптированы.

> Скрипт **не работает с включенным античитом** Samp Addon, так как разработчик аддона фильтрует все скрипты по белому списку. Скрипт не заменяет [Samp Addon](https://sa-mp.ru/sampaddon), и не использует его возможности. 

## Дополнительно
Вы можете установить другие дополнения и плагины с функционалом схожим с аддоном  

* [Transparent Menu.asi - Прозрачное меню](https://libertycity.ru/files/gta-san-andreas/96340-transparent-menu.html)
* [NormalMap.asi - Улучшенное освещение персонажей](https://www.blast.hk/threads/19173/)
* [OutFitFix.asi - Исправляет сбои при предварительном просмотре textdraws](https://gtaforums.com/topic/759412-relsa-fixes-for-normalmapweapons-outfit-and-shell/)
* [SAMP Graphic Restore.asi - Плагин отображает корректно абсолютно все прелести ENB Series в многопользовательской игре.](https://www.blast.hk/threads/25150/)
* [Grass.asi - Возвращает траву и кусты](https://libertycity.net/files/gta-san-andreas/96677-samp-grass.html)
* [StreamMemFix.asi - Повышает размер Stream Memory используемой игрой, что дает колоссальное приимущество в прорисовке текстур, поэтому они перестают пропадать.](https://libertycity.ru/files/gta-san-andreas/31883-sa-streammemfix-2.2.html)
* [DwmComposition.asi - Плагин отключает переход windows на упрощенный стиль (Не использовать на windows 10!!)](https://www.blast.hk/threads/13368/)
* [Widescreen-fix.asi - Исправляет проблемы с широкоформатными мониторами](https://gamemodding.com/ru/gta-san-andreas/others/45270-widescreen-fix.html)
* [RoadReflectionsFix.asi - Фикс отражений на мокрой дороге](https://www.gtagarage.com/mods/show.php?id=22398)

## Config
Все настройки хранятся в файле moonloader\config\AbsoluteFix.ini  
```INI
    antiafk = true,
    anticrash = true,
    autoreconnect = true,
    chatfilter = true,
    dialogfix = true,
    disablenotifications = true,
    disablerecordnotifications = true,
    fastload = true,
    hideattachesonaim = true,
    hidehousesmapicons = true,
    gamefixes = true,
    infinityrun = true,
    improvedrun = true,
    improvedbike = true,
    improvedjetpack = true,
    improvedairvehheight = true,
    keybinds = true,
    noeffects = false,
    nologo = false,
    noradio = false,
    nogametext = false,
    noweaponpickups = true,
    mapfixes = true,
    menupatch = true,
    pmsoundfix = true,
    restoreremovedobjects = false,
    recontime = 15000,
    vehvisualdmg = false
```

> Скрипт предназначен для Absolute Play, дял других проектов попробуйте более функциональные скрипты с множеством фиксов
[GameFixer by Gorskin](https://vk.com/@gorskinscripts-gamefixer-obnovlenie-30)
и [MixSets](https://www.mixmods.com.br/2022/03/sa-mixsets/)

## KnownBugs
* При восстановлении серверных объектов удаленных через RemoveBuildings, теряется исходное положение некоторых объектов. Например автобусные остановки повернуты не в ту сторону

## Disclaimer
Функционал был подобран из открытых источников, и не является результатом реверса Samp Addon.
Этот скрипт не влючает в себя античит, и не может считаться полноценной заменой аддона.